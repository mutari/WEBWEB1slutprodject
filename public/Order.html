<!DOCTYPE html>
<html lang="sv">
  <head>
    <title>catering</title>
    <!--link(rel="stylesheet" href="/fileCSS/style.css")-->
    <!--link(rel="stylesheet" href="/fileCSS/styleMain.css")-->
    <link rel="stylesheet" href="style/style.css">
    <link rel="stylesheet" href="style/styleMain.css">
    <!--script(src="/fileJS/DataList.js")-->
    <!--script(src="/fileJS/order.js")-->
    <script src="javascript/DataList.js"></script>
    <script src="javascript/order.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--när sidan öpnas kollar jag vilket objeckt man ska beställa-->
  </head>
  <body>
    <!-- header element inehåller en meny samt logo bild-->
    <header> 
      <div id="logo"><a href="index.html"><img></a></div>
      <div id="stars">
        <ul>
          <li><img src="images/star.png"></li>
          <li><img src="images/star.png"></li>
          <li><img src="images/star.png"></li>
          <li><img src="images/star.png"></li>
          <li><img src="images/starEmpty.png"></li>
        </ul>
      </div>
      <ul>
        <li><a href="Order.html"> <img src="images/shopping-cart.png" width="16px" hight="16px"></a></li>
        <li><a href="OmOss.html">Om oss</a></li>
        <li><a href="Event.html">Event</a></li>
        <li><a href="Mat.html">Mat</a></li>
      </ul>
      <div id="dropDown"><span>Ö</span>
        <div id="ddcontent"> 
          <ul>
            <li><a href="Order.html"> <img src="images/shopping-cart.png" width="16px" hight="16px"></a></li>
            <li><a href="OmOss.html">Om oss</a></li>
            <li><a href="Event.html">Event</a></li>
            <li><a href="Mat.html">Mat</a></li>
          </ul>
        </div>
      </div>
    </header>
    <!-- image är ett bild spel-->
    <div id="image"><img src="images/bannerImage1.jpg" height="100%" width="100%"></div>
    <!-- main inehåller allt sidans inehål-->
    <main id="mainOrder">
      <div id="order">
        <table>
          <caption class="red">Varukorg</caption>
          <thead>
            <tr>
              <th></th>
              <th class="Vara">Vara</th>
              <th class="Antal">Antal</th>
              <th class="Pris">Pris</th>
              <th class="Summa">summa</th>
            </tr>
          </thead>
          <tbody>
            <!--genererar tabbelen med alla produkter du har lagt i kundkorgen-->
            <tr v-for="item in orders">
              <td> 
                <button v-on:click="Delete(item.id)"><img src="images/del.png" width="16px" hight="16px"></button>
              </td>
              <td class="Vara">{{ item.name }}</td>
              <td class="Antal">{{ item.antalPers }}</td>
              <td class="Pris">{{ item.prise }}</td>
              <td class="Summa">{{ item.totalPrise }}</td>
            </tr>
          </tbody>
          <tfoot>
            <tr>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td class="Summa">Totalpris: {{ TotalPris() }}kr</td>
            </tr>
          </tfoot>
        </table>
        <!--hur man hämtar produkten-->
        <div id="transport"> 
          <form> 
            <div id="toggel">
              <input class="ios-toggle" type="checkbox" name="checkbox" id="checkbox">
              <label class="checkbox-label" for="checkbox" data-off="off" data-on="on"></label>
            </div>
            <div id="addres">
              <label for="addres">Address:</label>
              <input type="text" name="addres"><br>
              <label for="postcod">Post Code:</label>
              <input type="text" name="postcod">
            </div>
          </form>
        </div>
        <!--betalnig-->
        <fieldset id="betala">
          <legend>KortBetalning</legend>
          <form>
            <div>
              <label for="korttyp">Kort typ: </label>
              <select name="korttyp">
                <option value="Mastercard">Mastercard</option>
                <option value="Mastro">Mastro</option>
                <option value="Visa">Visa</option>
              </select>
            </div>
            <div>
              <label for="kortnummer">Kortnummer:</label>
              <input type="text" name="kortunmmer">
            </div>
            <div>
              <label for="datum">Datum:</label>
              <input type="number" name="moth" max="99" min="00">
              <label for="year">/</label>
              <input type="number" name="year" max="99" min="00">
            </div>
            <div>
              <label for="CVI">CVI: </label>
              <input type="text" name="CSC" max="999" min="000">
            </div>
            <button onclick="buy();"><img src="images/shopping-cart.png" width="16" hight="16"></button>
          </form>
        </fieldset>
      </div>
      <script>
        //när sidan har laddats så gömer man transport diven
        document.getElementById('addres').style.display = "none";
        document.getElementById('addres').addEventListener('change', TransportHome());
        
        //tack vare Vue kan jag uppdatera tabbelen med produkter automatiskt utan att behöva uppdatera sidan
        var app = new Vue({
            el: "#mainOrder",
            data: {
                orders: JSON.parse(window.localStorage.getItem("Orders"))
            },
            methods: {
                TotalPris: function() {
                    var total = 0;
                    for(var i = 0; i < this.orders.length; i++) {
                        total += this.orders[i].totalPrise;
                    }
                    return total.toString();
                },
                Delete: function(id) {
                    //tar bort den ordern med det specifika id
                    for(var i = 0; i < this.orders.length; i++) {
                        if(this.orders[i].id == id) {
                            this.orders.splice(id, 1);
        
                            //gåt i genom alla ordrar och uppdeterar deras id
                            for(var i = 0; i < this.orders.length; i++) {
                                this.orders[i].id = i;
                            }
        
                            window.localStorage.setItem("Orders", JSON.stringify(this.orders));
        
                            return;
                        }
                    }
                }
            }
        });
      </script>
    </main>
    <!-- footer inehåler kontakt uppgifter och ett mail formolär-->
    <footer>
      <div id="kontakt">
        <div>
          <h1>Kontakt uppgifter</h1>
          <p>address</p>
          <p>gatunumer</p>
          <p>något mera</p>
          <h3>tel:</h3>
          <p>070-000 11 33</p>
          <h5>teltider</h5>
          <p class="tider">mån-lör 8-18</p>
          <p class="tider">sön stängt</p>
        </div>
      </div>
      <div id="message">
        <h1>Skicka ett medelande</h1>
        <form method="post" action="php/formmail.php">
          <label for="email">från</label><br>
          <input type="text" name="email" placeholder="test@yahoo.com"><br>
          <label for="subject">ämne</label><br>
          <input type="text" name="subject"><br>
          <textarea name="message" cols="50" rows="7"></textarea><br>
          <button type="submit">skicka</button>
        </form>
      </div>
      <p id="copy">©philip johansson</p>
    </footer>
  </body>
</html>